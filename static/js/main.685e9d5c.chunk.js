(this["webpackJsonphomework-day1"]=this["webpackJsonphomework-day1"]||[]).push([[0],{11:function(e,t,n){},13:function(e,t,n){},14:function(e,t,n){"use strict";n.r(t);var i=n(1),c=n.n(i),s=n(6),o=n.n(s),r=(n(11),n(2)),a=n(3),l=n(4),d=n(0),u=function(e){var t=e.onClick,n=e.index;return Object(d.jsxs)("button",{type:"button",className:"inline-flex justify-center items-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-pink-600 hover:bg-pink-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500",onClick:function(){return t(n)},children:[Object(d.jsx)("svg",{className:"h-4 w-4 mr-1.5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:Object(d.jsx)("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})}),"EDIT"]})},m=function(e){var t=e.text,n=e.onClick,i=e.index;return Object(d.jsxs)("button",{type:"button",className:"inline-flex justify-center items-center py-2 px-4 border border-pink-500 shadow-sm text-sm font-medium rounded-md text-pink-500 bg-white hover:text-pink-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500",onClick:function(){return n(i)},children:[Object(d.jsx)("svg",{className:"w-4 h-4 mr-1.5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:Object(d.jsx)("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}),t]})},b=function(e){var t=e.children;return Object(d.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:t})},f=function(e){var t=e.index,n=e.item,c=e.onEdit,s=e.onDelete,o=n.title,a=n.price,l=n.imageUrl,f=n.numOfStock,x=n.onlyOne,j=n.description,p=i.useState(!1),h=Object(r.a)(p,2),g=h[0];h[1];return Object(d.jsxs)("div",{className:"relative flex flex-col",children:[Object(d.jsxs)("div",{className:" group block w-full rounded-lg bg-gray-100 focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-offset-gray-100 focus-within:ring-pink-500 overflow-hidden ",children:[Object(d.jsx)("img",{src:l,alt:"",className:" object-cover pointer-events-none group-hover:opacity-75 h-48 w-full "}),Object(d.jsx)("button",{type:"button",className:"absolute inset-0 focus:outline-none",children:Object(d.jsxs)("span",{className:"sr-only",children:["View details for ",o]})})]}),Object(d.jsxs)("div",{className:" flex-1 flex md:flex-col justify-between items-start md:items-stretch gap-3 px-2 ",children:[Object(d.jsxs)("div",{className:"mt-1 flex-1",children:[Object(d.jsxs)("div",{className:"flex justify-between items-center gap-3",children:[Object(d.jsxs)("div",{children:["RM ",Object(d.jsx)("span",{className:"text-2xl font-bold",children:a})]}),x?Object(d.jsx)(b,{children:"Only One"}):Object(d.jsxs)("div",{className:"text-sm text-gray-500",children:[f," piece available"]})]}),Object(d.jsx)("p",{className:" block text-sm font-medium text-gray-900 truncate pointer-events-none ",children:o}),Object(d.jsx)("p",{className:" text-sm line-clamp-3 font-medium text-gray-500 pointer-events-none ",children:j})]}),Object(d.jsxs)("div",{className:"flex flex-col md:flex-row gap-3 py-3",children:[Object(d.jsx)(u,{onClick:c,index:t}),Object(d.jsx)(m,{text:g?"DELETING...":"DELETE",onClick:s,index:t})]})]})]})},x=function(e){var t=e.addItem,n=e.updateItem,c=e.formData,s=e.setFormData,o=e.editMode,r=e.onCancel,a=Object(i.useRef)(),l=Object(i.useRef)();Object(i.useEffect)((function(){a.current.innerText=o?"Update":"Add"}),[o]);var u=function(e){["price","numOfStock"].includes(e.target.name)?s({type:"formEvent",payloads:{name:e.target.name,value:Number(e.target.value)}}):s({type:"formEvent",payloads:{name:e.target.name,value:e.target.value}})};return Object(d.jsx)("div",{className:" flex-initial bg-white w-full lg:max-w-md border-b border-gray-100 ",children:Object(d.jsxs)("form",{className:"flex flex-col h-full",onSubmit:function(e){e.preventDefault(),c&&(o?n(c):t(c),l.current&&l.current.focus())},children:[Object(d.jsxs)("div",{className:"py-6 px-4 bg-pink-700 sm:px-6",children:[Object(d.jsx)("div",{className:"flex items-center justify-between",children:Object(d.jsx)("h2",{className:"text-lg font-medium text-white",children:"New Listing"})}),Object(d.jsx)("div",{className:"mt-1",children:Object(d.jsx)("p",{className:"text-sm text-pink-300",children:"Get started by filling in the information below to create your new listing."})})]}),Object(d.jsx)("div",{className:"px-4 sm:px-6 pb-12",children:Object(d.jsxs)("div",{className:"space-y-6 pt-6 pb-5",children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{htmlFor:"listing-title",className:"block text-sm font-medium text-gray-900",children:"Title"}),Object(d.jsx)("div",{className:"mt-1",children:Object(d.jsx)("input",{type:"text",name:"title",id:"listing-title",required:!0,className:" block w-full shadow-sm sm:text-sm focus:ring-pink-500 focus:border-pink-500 border-gray-300 rounded-md ",value:c.title||"",onChange:u,ref:l})})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{htmlFor:"listing-price",className:"block text-sm font-medium text-gray-900",children:"Price"}),Object(d.jsx)("div",{className:"mt-1",children:Object(d.jsx)("input",{type:"number",name:"price",id:"listing-price",required:!0,className:" block w-full shadow-sm sm:text-sm focus:ring-pink-500 focus:border-pink-500 border-gray-300 rounded-md ",value:c.price||"",onChange:u})})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-900",children:"Description"}),Object(d.jsx)("div",{className:"mt-1",children:Object(d.jsx)("textarea",{id:"description",name:"description",rows:"4",required:!0,className:" block w-full shadow-sm sm:text-sm focus:ring-pink-500 focus:border-pink-500 border border-gray-300 rounded-md ",value:c.description||"",onChange:u})})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{htmlFor:"listing-condition",className:"block text-sm font-medium text-gray-900",children:"Condition"}),Object(d.jsx)("div",{className:"mt-1",children:Object(d.jsxs)("select",{id:"listing-condition",name:"condition",required:!0,className:" block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-pink-500 focus:border-pink-500 sm:text-sm rounded-md ",value:c.condition||"new",onChange:u,children:[Object(d.jsx)("option",{value:"new",children:"New"}),Object(d.jsx)("option",{value:"used_like-new",children:"Used (like new)"}),Object(d.jsx)("option",{value:"used_good",children:"Used (good)"}),Object(d.jsx)("option",{value:"used_fair",children:"Used (fair)"})]})})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{htmlFor:"listing-availability",className:"block text-sm font-medium text-gray-900",children:"Availability"}),Object(d.jsx)("div",{className:"mt-1",children:Object(d.jsxs)("select",{id:"listing-availability",name:"availability",required:!0,className:" block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-pink-500 focus:border-pink-500 sm:text-sm rounded-md ",value:c.availability||"in-stock",onChange:u,children:[Object(d.jsx)("option",{value:"in-stock",children:"In Stock"}),Object(d.jsx)("option",{value:"single-item",children:"Single Item"})]})})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{htmlFor:"num-of-stock",className:"block text-sm font-medium text-gray-900",children:"Number of Available Stock"}),Object(d.jsx)("div",{className:"mt-1",children:Object(d.jsx)("input",{type:"number",name:"numOfStock",id:"num-of-stock",required:!0,className:" block w-full shadow-sm sm:text-sm focus:ring-pink-500 focus:border-pink-500 border-gray-300 rounded-md ",value:c.numOfStock||"1",onChange:u})})]})]})}),Object(d.jsxs)("div",{className:" flex-shrink-0 px-4 py-4 flex justify-end border-t border-gray-200 ",children:[o&&Object(d.jsx)("button",{className:" inline-flex  justify-center  items-center  py-2 px-4 border  border-pink-500  shadow-sm  text-sm  font-medium  rounded-md  text-pink-500  bg-white  hover:text-pink-700  focus:outline-none  focus:ring-2  focus:ring-offset-2  focus:ring-pink-500 ",id:"cancel-btn",onClick:r,children:"Cancel"}),Object(d.jsx)("button",{type:"submit",className:" ml-4 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-pink-600 hover:bg-pink-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500 ",id:"submit-btn",ref:a,children:"ADD"})]})]})})},j="https://ecomm-service.herokuapp.com/marketplace";function p(e,t){switch(t.type){case"setData":return Object(l.a)({},t.payloads);case"formEvent":return Object(l.a)(Object(l.a)({},e),{},Object(a.a)({},t.payloads.name,t.payloads.value));default:return e}}var h=function(){var e={title:"",description:"",price:0,condition:"new",imageUrl:"",availability:"in-stock",numOfStock:1},t=Object(i.useReducer)(p,e),n=Object(r.a)(t,2),c=n[0],s=n[1],o=Object(i.useState)(!1),a=Object(r.a)(o,2),l=a[0],u=a[1],m=Object(i.useState)(void 0),b=Object(r.a)(m,2),h=b[0],g=b[1],O=Object(i.useState)(1),v=Object(r.a)(O,2),y=v[0],k=v[1],N=function(e,t){return function(e,t){return fetch("".concat(j,"?limit=6&page=").concat(e||1),{signal:t}).then((function(e){return e.json()}))}(e,t).then((function(e){return g(e)})).catch((function(e){if("AbortError"!==e.name)throw e}))};Object(i.useEffect)((function(){var e=new AbortController;return N(y,e.signal),function(){e.abort()}}),[y]),Object(i.useEffect)((function(){console.log("\n      [DEBUG] *** useEffect@MarketPlace component *** \n\n      id : ".concat(c._id," \n\n      title : ").concat(c.title," \n\n      price : ").concat(c.price," \n\n      numOfStock: ").concat(c.numOfStock," \n\n      description  : ").concat(c.description," \n\n      condition  : ").concat(c.condition," \n\n      availibility  : ").concat(c.availability," \n\n    "))}),[c]);var w=function(e){console.log("[INFO] editItem function ..."),u(!0),s({type:"setData",payloads:h[e]})},C=function(t){console.log("[INFO] deleteItem function ..."),function(e){return fetch("".concat(j,"/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}))}(h[t]._id).then((function(){N(),s({type:"setData",payloads:e})}))},D=function(){u(!l)};return Object(d.jsxs)("main",{className:"bg-gray-50 lg:flex",children:[Object(d.jsx)("div",{className:"flex-1",children:Object(d.jsxs)("div",{className:"max-w-7xl mx-auto pt-16 pb-24 px-4 sm:px-6 lg:px-8",children:[Object(d.jsx)("div",{className:"sm:flex sm:flex-col sm:align-center mb-12",children:Object(d.jsx)("h1",{className:"text-5xl font-extrabold text-gray-900 sm:text-center",children:"Marketplace"})}),Object(d.jsxs)("div",{className:"flex justify-between",children:[Object(d.jsx)("button",{className:" bg-transparent  hover:bg-pink-600  text-pink-700  font-semibold  hover:text-white  py-2 px-10  border  border-pink-600  hover:border-transparent  rounded-2xl focus:ring-pink-900 m-2 ",disabled:1===y,onClick:function(){return k(y-1)},children:"Prev"}),Object(d.jsx)("button",{className:" bg-transparent  hover:bg-pink-600  text-pink-700  font-semibold  hover:text-white  py-2 px-10  border  border-pink-600  hover:border-transparent  rounded-2xl focus:ring-pink-900 m-2 ",onClick:function(){return k(y+1)},children:"Next"})]}),Object(d.jsx)("div",{className:" grid md:grid-cols-2 gap-x-4 gap-y-8 xl:grid-cols-3 xl:gap-x-6 ",children:h&&h.map((function(e,t){return Object(d.jsx)(f,{item:e,index:t,onEdit:w,onDelete:C},e._id)}))})]})}),Object(d.jsx)(x,{addItem:function(t){var n;console.log("[INFO] addItem function ..."),(n=t,fetch(j,{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}))).then((function(){N(),s({type:"setData",payloads:e})}))},updateItem:function(t){var n;console.log("[INFO] updateItem function ..."),D(),(n=t,fetch("".concat(j,"/").concat(n._id),{method:"PATCH",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}))).then((function(){N(),s({type:"setData",payloads:e})}))},formData:c,setFormData:s,onCancel:function(){console.log("[DEBUG] onCancel function ..."),D(),s({type:"setData",payloads:{}})},editMode:l})]})};var g=function(){return Object(d.jsx)("div",{className:"App",children:Object(d.jsx)(h,{})})};n(13);o.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(g,{})}),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.685e9d5c.chunk.js.map